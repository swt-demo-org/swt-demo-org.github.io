import{d as D,i as x,F as d,k as P,l as V,b as m,o as g,c as C,f as l,w as t,m as R,u as c,n as A,e as v,h as O,B as $,C as N,t as B,s as F,p as M,g as E,_ as j}from"./index-a031bde1.js";import{u as Q}from"./useDataTable-53f06a11.js";const w=p=>(M("data-v-9b4bdafe"),p=p(),E(),p),q={class:"card"},z={class:"datatable-header"},G=w(()=>v("h5",null,"Управление пользователями",-1)),H={class:"p-input-icon-left"},J=w(()=>v("i",{class:"pi pi-search"},null,-1)),K={key:1},W=D({__name:"user-list",setup(p){const I=x(),{tableData:_,filters:u,dataTableRef:T,exportCSV:X}=Q();u.value={global:{value:null,matchMode:d.CONTAINS},id:{value:null,matchMode:d.CONTAINS},email:{value:null,matchMode:d.CONTAINS},fullName:{value:null,matchMode:d.CONTAINS},balance:{value:null,matchMode:d.CONTAINS},adminLevel:{value:null,matchMode:d.EQUALS}};async function L(){const n=await fetch("/data/users.json").then(s=>s.json());_.value=n}P(async()=>{await I.$load({name:"app-data"}).catch(n=>V.error(n)),V.debug(I.products),L(),V.debug(_)});const k={globalFilterFields:["id","email","fullName","balance","adminLevel"],filterDisplay:"row",stripedRows:!0,paginator:!0,rows:10,paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",rowsPerPageOptions:[10,20,50],currentPageReportTemplate:"Показаны записи с {first} по {last}. Всего: {totalRecords}"},f=["Пользователь","Модератор","Администратор"],h=["info","warning","danger"],y=n=>n!=null;function S(n){}return(n,s)=>{const r=m("InputText"),i=m("Column"),b=m("Tag"),U=m("Dropdown");return g(),C("div",q,[l(c(F),R({ref_key:"dataTableRef",ref:T,filters:c(u),"onUpdate:filters":s[1]||(s[1]=a=>A(u)?u.value=a:null),value:c(_),"data-key":"name",class:"p-datatable-sm",onRowClick:S},k),{header:t(()=>[v("div",z,[G,v("span",H,[J,l(r,{modelValue:c(u).global.value,"onUpdate:modelValue":s[0]||(s[0]=a=>c(u).global.value=a),placeholder:"Поиск"},null,8,["modelValue"])])])]),empty:t(()=>[O(" Записи не найдены ")]),default:t(()=>[l(i,{field:"id",header:"ID",sortable:!0},{filter:t(({filterModel:a,filterCallback:o})=>[l(r,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,onInput:e=>o(),class:"p-column-filter"},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),l(i,{field:"email",header:"Email",sortable:!0},{filter:t(({filterModel:a,filterCallback:o})=>[l(r,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,onInput:e=>o(),class:"p-column-filter"},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),l(i,{field:"fullName",header:"Имя",sortable:!0},{filter:t(({filterModel:a,filterCallback:o})=>[l(r,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,onInput:e=>o(),class:"p-column-filter"},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),l(i,{field:"balance",header:"Баланс",sortable:!0},{filter:t(({filterModel:a,filterCallback:o})=>[l(r,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,onInput:e=>o(),class:"p-column-filter"},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),l(i,{field:"adminLevel",header:"Статус",sortable:!0},{filter:t(({filterModel:a,filterCallback:o})=>[l(U,{modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,onChange:e=>o(),options:[0,1,2],class:"p-column-filter",showClear:!0},{option:t(e=>[l(b,{value:f[e.option],severity:h[e.option]},null,8,["value","severity"])]),value:t(e=>[y(e.value)?(g(),$(b,{key:0,value:f[e.value],severity:h[e.value]},null,8,["value","severity"])):N("",!0),y(e.value)?N("",!0):(g(),C("span",K,B(e.placeholder)+" ",1))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),body:t(({data:a})=>[l(b,{value:f[a.adminLevel],severity:h[a.adminLevel]},null,8,["value","severity"])]),_:1})]),_:1},16,["filters","value"])])}}});const ee=j(W,[["__scopeId","data-v-9b4bdafe"]]);export{ee as default};
