import{d as U,g as S,h as k,F as n,i as A,j as f,b as m,o as O,c as x,f as l,w as o,m as R,u as i,k as D,e as v,l as L,s as $,p as F,n as M,_ as j}from"./index-48fb6c4a.js";import{u as B}from"./useDataTable-7713bbf7.js";const I=p=>(F("data-v-6e9dddd7"),p=p(),M(),p),E={class:"card"},Q={class:"datatable-header"},q=I(()=>v("h5",null,"Мои заказы",-1)),z={class:"p-input-icon-left"},G=I(()=>v("i",{class:"pi pi-search"},null,-1)),H=U({__name:"my-order-list",setup(p){const h=S(),b=k(),{tableData:_,filters:r,dataTableRef:y,exportCSV:J}=B();r.value={global:{value:null,matchMode:n.CONTAINS},id:{value:null,matchMode:n.CONTAINS},status:{value:null,matchMode:n.EQUALS},count:{value:null,matchMode:n.CONTAINS},price:{value:null,matchMode:n.CONTAINS},description:{value:null,matchMode:n.CONTAINS},adminPrice:{value:null,matchMode:n.CONTAINS},sellPrice:{value:null,matchMode:n.CONTAINS},changedAt:{value:null,matchMode:n.CONTAINS}};async function C(){const u=await fetch("/data/my-orders.json").then(c=>c.json());_.value=u}A(async()=>{await h.$load({name:"app-data"}).catch(u=>f.error(u)),f.debug(h.products),C(),f.debug(_)});const N={globalFilterFields:["id","status","count","price","description","adminPrice","sellPrice","changedAt"],filterDisplay:"row",stripedRows:!0,paginator:!0,rows:10,paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",rowsPerPageOptions:[10,20,50],currentPageReportTemplate:"Показаны записи с {first} по {last}. Всего: {totalRecords}"},T=["Отказано","Реализован","Ожидание товара","Создан"],V=u=>{switch(u){case"Отказано":return"danger";case"Реализован":return"success";case"Ожидание товара":return"warning";default:return"info"}};function w(u){b.push("/user/my-order-info?orderId="+u.data.id)}return(u,c)=>{const s=m("InputText"),d=m("Column"),g=m("Tag"),P=m("Dropdown");return O(),x("div",E,[l(i($),R({ref_key:"dataTableRef",ref:y,filters:i(r),"onUpdate:filters":c[1]||(c[1]=e=>D(r)?r.value=e:null),value:i(_),"data-key":"name",class:"p-datatable-sm",onRowClick:w},N),{header:o(()=>[v("div",Q,[q,v("span",z,[G,l(s,{modelValue:i(r).global.value,"onUpdate:modelValue":c[0]||(c[0]=e=>i(r).global.value=e),placeholder:"Поиск"},null,8,["modelValue"])])])]),empty:o(()=>[L(" Записи не найдены ")]),default:o(()=>[l(d,{field:"id",header:"ID",sortable:!0},{filter:o(({filterModel:e,filterCallback:t})=>[l(s,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,onInput:a=>t(),class:"p-column-filter"},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),l(d,{field:"status",header:"Статус",sortable:!0},{filter:o(({filterModel:e,filterCallback:t})=>[l(P,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,onChange:a=>t(),options:T,class:"p-column-filter",style:{"min-width":"12rem"},showClear:!0},{option:o(a=>[l(g,{value:a.option,severity:V(a.option)},null,8,["value","severity"])]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),body:o(({data:e})=>[l(g,{value:e.status,severity:V(e.status)},null,8,["value","severity"])]),_:1}),l(d,{field:"count",header:"Кол-во",sortable:!0},{filter:o(({filterModel:e,filterCallback:t})=>[l(s,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,onInput:a=>t(),class:"p-column-filter"},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),l(d,{field:"price",header:"Цена",sortable:!0},{filter:o(({filterModel:e,filterCallback:t})=>[l(s,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,onInput:a=>t(),class:"p-column-filter"},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),l(d,{field:"description",header:"Описание",sortable:!0},{filter:o(({filterModel:e,filterCallback:t})=>[l(s,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,onInput:a=>t(),class:"p-column-filter"},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),l(d,{field:"adminPrice",header:"Цена админ",sortable:!0},{filter:o(({filterModel:e,filterCallback:t})=>[l(s,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,onInput:a=>t(),class:"p-column-filter"},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),l(d,{field:"sellPrice",header:"Цена продажи",sortable:!0},{filter:o(({filterModel:e,filterCallback:t})=>[l(s,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,onInput:a=>t(),class:"p-column-filter"},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),l(d,{field:"changedAt",header:"Изменено",sortable:!0},{filter:o(({filterModel:e,filterCallback:t})=>[l(s,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,onInput:a=>t(),class:"p-column-filter"},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1})]),_:1},16,["filters","value"])])}}});const X=j(H,[["__scopeId","data-v-6e9dddd7"]]);export{X as default};
